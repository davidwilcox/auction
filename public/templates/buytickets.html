<div>

  <div ng-show="submitProgress">
    <md-progress-linear md-mode="determinate" value="{{submitProgress}}"></md-progress-linear>
  </div>
  <div layout="column" layout-padding>
    <div layout="row" >
      <div flex="66">
        <md-toolbar class="md-warn" layout-padding>
          <div class="md-toolbar-tools">
            Enter info here for your FIRST ticket.  If you need more than one ticket, click the blue “Add” button below, and scroll down to enter the additional info.
          </div>
        </md-toolbar>
	<div layout="column">
	  <div ng-repeat="ticket in tickets track by $index">
            <div id="anchor{{$index}}">
	      <md-card layout-padding>
	        <div layout="row" flex>
                  <div flex>
		    <md-input-container>
		      <label>Name</label>
		      <input ng-model="ticket.name" size="50">
		    </md-input-container>
                  </div>

                  <md-card-actions>
                    <md-button class="md-icon-button" ng-click="removeTicket($index)" >
                      <md-icon>clear</md-icon>
                    </md-button>
		  </md-card-actions>
	        </div>

                <div>
	          <label>Age Category</label>
	          <md-radio-group ng-model="ticket.agegroup" ng-change="computeOrderDetails()" required>
                    <md-radio-button value="ADULT_TICKET"><b>Adult</b>-Upstairs food, bid card, $16</md-radio-button>
                    <md-radio-button value="HIGHSCHOOL_TICKET"><b>High School Class</b>-Upstairs food, no bid card, $12</md-radio-button>
                    <md-radio-button value="JUNIORHIGH_TICKET"><b>Junior High Class</b>—Downstairs food, no bid card, $6</md-radio-button>
                    <md-radio-button value="CHILD_TICKET"><b>Elementary Classes</b>—Age five through 5th grade, downstairs food, special activities, $6</md-radio-button>
                  </md-radio-group>

                  <label>Dietary Restrictions</label>
                  <md-radio-group ng-model="ticket.foodRes">
                    <md-radio-button value="NONE_FOOD">No food restrictions</md-radio-button>
                    <md-radio-button value="VEGETARIAN_FOOD">Vegetarian</md-radio-button>
                    <md-radio-button value="GLUTENFREE_FOOD">Gluten-free</md-radio-button>
                  </md-radio-group>
                </div>
                <div>
                  <md-input-container>
                    <label>Contact email for this ticket holder</label>
                    <input
                       ng-model="ticket.buyer.email"
                       size="40"
                       >
                  </md-input-container>
                  <md-input-container>
                    <label>Contact phone</label>
                    <input
                       ng-model="ticket.buyer.phonenumber"
                       phone-input
                       >
                  </md-input-container>
                </div>
            </div>
            </md-card> <!--panel-body-->
          </div> <!--ticket repeater-->
        </div>
      </div>

      <div flex="33">
        <md-card layout-padding>
          <div>Order Summary</div>
          
          <div>
            <span>{{numAdultTickets}}</span>
            <span>Adult Tickets</span>
            <span>x $16 =</span>
            <span>${{numAdultTickets*16}}</span>
          </div>
          
          <div>
            <span>{{numHighSchoolTickets}}</span>
            <span>High School Tickets</span>
            <span>x $12 =</span>
            <span>${{numHighSchoolTickets*12}}</span>
          </div>

          <div>
            <span>{{numJuniorHighTickets}}</span>
            <span>Junior High Tickets</span>
            <span>x $6 =</span>
            <span>${{numJuniorHighTickets*6}}</span>
          </div>

          
          <div>
            <span>{{numChildTickets}}</span>
            <span>Child Tickets</span>
            <span>x $6 =</span>
            <span>${{numChildTickets*6}}</span>
          </div>

          <div>
            <b>Total: ${{calculateTotal()}}</b>
          </div>
          <div>
            <md-button stripe-checkout="doCheckout"
		       data-email="{{currentUserEmail}}"
		       data-key="pk_test_TplRtT5yloUqkARvZ1QR4dzt"
		       data-name="SVUUS Auction"
		       data-description="Tickets"
		       data-amount="{{calculateTotal()*100}} | currency"
                       class="md-primary md-raised"
		       >
	      Purchase Tickets
            </md-button>
          </div>
        </md-card>
      </div>
    </div>
    <div id="bottom"></div>
    <div layout-align="left" layout="row">
      <md-button ng-click="addTicket()" class="md-primary md-raised">Add additional ticket to order</md-button>
      <md-button stripe-checkout="doCheckout"
		 data-email="{{currentUserEmail}}"
		 data-key="pk_test_TplRtT5yloUqkARvZ1QR4dzt"
		 data-name="SVUUS Auction"
		 data-description="Tickets"
		 data-amount="{{calculateTotal()*100}} | currency"
                 class="md-primary md-raised"
		 >
	Purchase Tickets
      </md-button>
    </div>
  </div>

</div> <!--main container-->
